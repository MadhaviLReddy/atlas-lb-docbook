<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book [
    <!-- Useful for describing APIs -->
    <!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
    <!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
    <!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
    <!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
    <!ENTITY BATCH_DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
    <!ENTITY ndash "&#8211;">
    <!ENTITY mdash "&#8212;">
]>
<book version="5.0" xmlns="http://docbook.org/ns/docbook"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xml:id="clb-devguide">
    <?rax title.font.size="35px" subtitle.font.size="20px"?>
    <title>Rackspace Cloud Load Balancers Developer Guide</title>
    <titleabbrev>Rackspace Cloud LB Dev Guide</titleabbrev>
    <info>
        <annotation>
            <remark> For 2011-06-29 republication to support IPv6,
                draft changes to support BATCH DELETE remain in this
                source XML but are excluded from the generated PDF and
                HTML. Search for "security=writeronly" to identify
                those changes.</remark>
        </annotation>
        <author>
            <personname>
                <firstname/>
                <surname/>
            </personname>
            <affiliation>
                <orgname>Rackspace Cloud</orgname>
            </affiliation>
        </author>
        <copyright>
            <year>2010</year>
            <year>2011</year>
            <holder>Rackspace US, Inc.</holder>
        </copyright>
        <releaseinfo>API v1.0</releaseinfo>
        <productname>Rackspace Cloud Load Balancers</productname>
        <pubdate>2011-11-22</pubdate>
        <legalnotice role="rs-api">
            <annotation>
                <remark>Copyright details are filled in by the template.</remark>
            </annotation>
        </legalnotice>
        <abstract>
            <para>This document is intended for software developers interested in developing
                applications using the Rackspace Cloud Load Balancers Application Program Interface
                (<abbrev>API</abbrev>).
            </para>
        </abstract>
        <revhistory>
            <revision>
                <date>2011-12-13</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added support for Auth 1.1 in <xref
                                   linkend="Authentication-d1e699"
                                />.</para>
                        </listitem>
                        <listitem>
                            <para>Added <xref
                                   linkend="List_Load_Balancer_Stats-d1e1524"
                                />.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-11-22</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated information in <xref
                                   linkend="table_virtual_ip_types"
                                />.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-11-18</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated <xref
                                   linkend="List_Nodes-d1e2218"/> with
                                note about <code>weight</code>
                                attributes.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-11-17</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated <xref
                                   linkend="Passive_Health_Monitor-d1e279"
                                />.</para>
                        </listitem>
                        <listitem>
                            <para>Added <xref
                                   linkend="Date_Time_Format"
                                />.</para>
                        </listitem>
                        <listitem>
                            <para>Updated <xref
                                   linkend="List_Load_Balancers-d1e1367"
                                /> with information for query
                                parameter
                                   <emphasis>nodeaddress</emphasis>.</para>
                        </listitem>
                        <listitem>
                            <para>Added <xref
                                   linkend="Erropage-d1e666"/>.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-10-13</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated examples as needed
                                to match the latest API.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-10-11</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated Atom
                                examples.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-09-26</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated <xref linkend="Absolute_Limits-d1e999"/>.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-09-07</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added basic TCP load
                                balancing to allow customers to
                                load balance traffic for any
                                TCP-based prototcol. See <xref linkend="Protocols-d1e4264"/>.</para>
                        </listitem>
                        <listitem>
                            <para>An X-Forwarded-For (XFF) HTTP
                                header is now automatically
                                inserted for all inbound HTTP
                                requests. See <xref linkend="Create_Load_Balancer-d1e1635"/>.</para>
                        </listitem>
                        <listitem>
                            <para>Added programmatic support
                                for determining Cloud Load Balancer
                                source addresses. See <xref linkend="List_Load_Balancer_Details-d1e1522"/> and <xref linkend="Create_Load_Balancer-d1e1635"/>.</para>
                        </listitem>
                        <listitem>
                            <para>Added support for batch
                                delete of Load Balancers, Nodes,
                                Virtual IPs, and Access List
                                Entries. See <xref linkend="Remove_Load_Balancer-d1e2093"/>, <xref linkend="Remove_Nodes-d1e2675"/>,
                                <xref linkend="Remove_Virtual_IP-d1e2919"/>, and <xref linkend="Manage_Access_Lists-d1e3187"/>, respectively.</para>
                        </listitem>
                        <listitem>
                            <para>Updated <xref linkend="Absolute_Limits-d1e999"/>and added
                                <code>absolutelimits</code> API
                                call to <xref linkend="Determining_Limits_Programmatically-d1e1039"/> to return the current absolute
                                limits for the account.</para>
                        </listitem>
                        <listitem>
                            <para>Updated examples to match the
                                current API.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-07-08</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added service endpoint for London (LON) region.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-07-07</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added support for accessing the Authentication Service,
                                based on whether your account is US-based or
                                UK-based.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-06-29</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added support for IPv6.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-04-19</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added details to support initial GA release.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-03-02</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Revised code samples and formatting to address initial beta feedback.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-02-23</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Initial release for public beta.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
        </revhistory>
    </info>
    <chapter xml:id="Overview-d1e82">
        <title>Overview</title>
        <section xml:id="Intended_Audience-d1e87">
            <title>Intended Audience</title>
            <para>This guide is intended for software developers who want to create applications using
                the Rackspace Cloud Load Balancers API. It assumes the reader has a general understanding of
                load balancing concepts and is familiar with:
            </para>
            <para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>ReSTful web services</para>
                    </listitem>
                    <listitem>
                        <para>HTTP/1.1 conventions</para>
                    </listitem>
                    <listitem>
                        <para>JSON and/or XML serialization formats</para>
                    </listitem>
                    <listitem>
                        <para>Atom syndication format</para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <section xml:id="Document_Change_History-d1e126">
            <title>Document Change History</title>
            <para>This version of the Developer Guide replaces and obsoletes all previous versions.
                The most recent changes are described in the table below: </para>
        <?rax revhistory?>
        </section>
        <section xml:id="Additional_Resources-d1e207">
            <title>Additional Resources</title>
            <para>You can download the most current version of this document from the Rackspace Cloud website at <link
                xlink:href="http://docs.rackspacecloud.com/loadbalancers/api/clb-devguide-latest.pdf">
                http://docs.rackspacecloud.com/loadbalancers/api/clb-devguide-latest.pdf</link>. </para>
            <para>For more details about the Rackspace Cloud Load Balancer service, refer to <link
                    xlink:href="http://www.rackspace.com/cloud/cloud_hosting_products/loadbalancers/"
                    >http://www.rackspace.com/cloud/cloud_hosting_products/loadbalancers/</link>.
                This site also offers links to Rackspace's official support channels, including
                knowledge base articles, forums, phone, chat, and email. </para>
            <para>You can also follow updates and announcements via twitter at <link
                    xlink:href="http://www.twitter.com/Rackspace">http://www.twitter.com/Rackspace</link>.
            </para>
        </section>
    </chapter>
    <chapter xml:id="Concepts-d1e233">
      <?dbhtml stop-chunking?>
        <title>Concepts</title>
        <para>To use the Rackspace Cloud Load Balancers API effectively, you should understand several key
            concepts:
        </para>
        <section xml:id="Load_Balancer-d1e243">
            <title>Load Balancer</title>
            <para>A load balancer is a logical device which belongs to a cloud account. It is used
                to distribute workloads between multiple back-end systems or services, based on the
                criteria defined as part of its configuration.
            </para>
        </section>
        <section xml:id="Virtual_IP-d1e252">
            <title>Virtual IP</title>
            <para>A virtual IP is an Internet Protocol (IP) address configured on the load balancer
                for use by clients connecting to a service that is load balanced. Incoming
                connections are distributed to back-end nodes based on the configuration of the load
                balancer. </para>
        </section>
        <section xml:id="Erropage-d1e669">
            <title>Error Page</title>
            <para>An error page is the html file that is shown to the
                end user when an error in the service has been thrown.
                By default every virtual server is provided with the
                default error file. It is also possible to submit a
                custom error page via the Load Balancers API. Refer to
                    <xref linkend="List_Errorpage-d1e2218"/> for
                details.</para>
        </section>
        <section xml:id="Node-d1e262">
            <title>Node</title>
            <para>A node is a back-end device providing a service on a specified IP and port.</para>
        </section>
        <section xml:id="Health_Monitor-d1e271">
            <title>Health Monitor</title>
            <para>A health monitor is a configurable feature of each
                load balancer. It is used to determine whether or not
                a back-end node is usable for processing a request.
                The load balancing service currently supports active
                health monitoring. </para>
            <section xml:id="Passive_Health_Monitor-d1e279">
                <title>Passive Health Monitor (No Longer
                    Available)</title>
                <para>Originally, by default, all load balancing
                    configurations utilized a passive health monitor.
                    This default behavior has now been disabled for
                    newly provisioned load balancers and will no
                    longer be available. Existing load balancers that
                    were provisioned by default with passive health
                    monitoring will continue to function as they did
                    before the change, however future releases will
                    disable passive health monitoring in a phased
                    manner. Existing load balancers with active health
                    monitoring enabled will continue to function as
                    before. </para>
            </section>
            <section xml:id="Active_Health_Monitor-d1e336">
                <title>Active Health Monitor</title>
                <para>Active health monitoring is a technique that
                    uses synthetic transactions executed at periodic
                    intervals to determine the condition of a node.
                    One of the advantages of active health monitoring
                    is that it does not require active transactions to
                    be processed by the load balancer to determine
                    whether or not a node is suitable for handling
                    traffic. Active health monitoring is not applied
                    by default and must be enabled per load balancer. </para>
                <para>The active health monitor can use one of three types of probes:
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>
                                connect
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                HTTP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                HTTPS
                            </para>
                        </listitem>
                    </itemizedlist>
                    These probes are executed at configured intervals; in the event of a failure, the node
                    status changes to
                    <code>OFFLINE</code>
                    and the node will not receive traffic. If, after running a subsequent test, the probe
                    detects that the node has recovered, then the node's status is changed to
                    <code>ONLINE</code>
                    and it is capable of servicing requests.
                </para>
            </section>
        </section>
        <section xml:id="Session_Persistence-d1e376">
            <title>Session Persistence</title>
            <para>Session persistence is a feature of the load balancing service. It attempts to
                force subsequent connections to a service to be redirected to the same node as long
                as it is online. </para>
        </section>
        <section xml:id="Connection_Logging-d1e385">
            <title>Connection Logging</title>
            <para>The connection logging feature allows logs to be delivered to a Cloud Files
                account every hour. For HTTP-based protocol traffic, these are Apache-style access
                logs. For all other traffic, this is  connection and transfer logging.</para>
        </section>
    </chapter>
    <chapter xml:id="General_API_Information-d1e395">
        <title>General API Information</title>
        <para>Ideas explained here are relevant to all operations of the API. For details of specific API operations, see the "API Operations" chapter.</para>
        <para>The Rackspace Cloud Load Balancers API is implemented using a ReSTful web service interface.
            Like other products in the Rackspace Cloud suite, the load balancing service shares a
            common token-based authentication system that allows seamless access between products
            and services.
        </para>
        <note>
            <para>All requests to authenticate and operate the service are performed using
                HTTPS on TCP port 443.
            </para>
        </note>
        <section xml:id="Authentication-d1e412">
            <title>Authentication</title>
            <para>Every ReST request against the load balancing service requires the inclusion of a
                specific authorization token, supplied by the
                <code>X-Auth-Token</code>
                HTTP header. Customers obtain this token by first using the Rackspace Cloud Authentication
                Service and supplying a valid username and API access key.
            </para>
            <section xml:id="Request-d1e423">
                <title>Request</title>
                <para>The Rackspace Cloud Authentication Service serves as the entry point to all
                    Rackspace Cloud APIs and is itself a ReSTful web service.</para>
                <para> To access the Authentication Service, you must know whether your account is
                    US-based or UK-based:
                </para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>
                            US-based accounts authenticate through <link xlink:href="https://auth.api.rackspacecloud.com/v1.1">https://auth.api.rackspacecloud.com/v1.1</link>.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            UK-based accounts authenticate through <link xlink:href="https://lon.auth.api.rackspacecloud.com/v1.1">https://lon.auth.api.rackspacecloud.com/v1.1</link>.
                        </para>
                    </listitem>
                </itemizedlist>
                <para>
                    Your account may be based in either the US or the UK; this is not determined
                    by your physical location but by the location of the Rackspace retail site which
                    was used to create your account:
                </para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>
                            If your account was
                            created via <link xlink:href="http://www.rackspacecloud.com">http://www.rackspacecloud.com</link>, it is a US-based account.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            If your account was
                            created via <link xlink:href="http:/www.rackspace.co.uk">http:/www.rackspace.co.uk</link>, it is a UK-based account.
                        </para>
                    </listitem>
                </itemizedlist>
                <para>
                    If you are unsure how your account was created, use the Rackspace contact
                    information at either site to ask for help.
                </para>
                <informaltable rules="all">
                    <thead>
                        <tr>
                            <td colspan="1">Verb</td>
                            <td colspan="1">URI</td>
                            <td colspan="4">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="1">
                                <command>POST</command>
                            </td>
                            <td colspan="1">/auth</td>
                            <td colspan="4">
                                Authenticate to receive a token and a service catalog.
                            </td>
                        </tr>
                    </tbody>
                </informaltable>
                <simpara>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                    ,
                    <returnvalue>203</returnvalue>
                </simpara>
                <simpara>
                    Error Response Code(s): unauthorized (
                    <errorcode>401</errorcode>
                    ), userDisabled (
                    <errorcode>403</errorcode>
                    ), badRequest (
                    <errorcode>400</errorcode>
                    ), authFault (
                    <errorcode>500</errorcode>
                    ), serviceUnavailable (
                    <errorcode>503</errorcode>
                    )
                </simpara>
                <simplesect>
                    <title>Authentication Request</title>
                    <para>
                        The authenticate operation provides clients with an authentication token and a list of regional
                        cloud endpoints.
                    </para>
                    <example>
                        <title>Auth Request: XML</title>
                        <programlistingco>
                            <areaspec>
                                <area xml:id="credentials.xml.user" units="linecolumn" coords="5 32"/>
                                <area xml:id="credentials.xml.key" units="linecolumn" coords="6 52"/>
                            </areaspec>
                            <programlisting language="xml">
                                <xi:include href="samples/credentials.xml" parse="text"/>
                            </programlisting>
                        </programlistingco>
                    </example>
                    <example>
                        <title>Auth Request: JSON</title>
                        <programlistingco>
                            <areaspec>
                                <area xml:id="credentials.json.user" units="linecolumn" coords="4 32"/>
                                <area xml:id="credentials.json.key" units="linecolumn" coords="5 52"/>
                            </areaspec>
                            <programlisting language="javascript">
                                <xi:include href="samples/credentials.json" parse="text"/>
                            </programlisting>
                        </programlistingco>
                    </example>
                    <calloutlist>
                        <callout arearefs="credentials.xml.user">
                            <para>
                                The username supplied here is your common Rackspace Cloud username.
                            </para>
                        </callout>
                        <callout arearefs="credentials.xml.key">
                            <para>
                                The key is your API access key. The key can be obtained from the Rackspace Cloud Control
                                Panel in the
                                <guimenu>Your Account</guimenu>
                                /
                                <guimenuitem>API Access</guimenuitem>
                                section.
                            </para>
                        </callout>
                    </calloutlist>


                </simplesect>
            </section>
            <section xml:id="Response-d1e468">
                <title>Response</title>

                <example xml:id="authentication_response">
                    <title>Authentication Response</title>
                    <?dbfo keep-together="always"?>
                    <para>
                        <example>
                            <title>Auth Response: XML</title>
                            <programlistingco>
                                <areaspec>
                                    <area xml:id="auth.xml.token.expires" units="linecolumn" coords="6 45"/>
                                    <area xml:id="auth.xml.sc.s.e.region" units="linecolumn" coords="10 23"/>
                                    <area xml:id="auth.xml.sc.s.e.v1d" units="linecolumn" coords="11 27"/>
                                    <area xml:id="auth.xml.sc.s.e.pu" units="linecolumn" coords="12 20"/>
                                    <area xml:id="auth.xml.sc.s.e.iu" units="linecolumn" coords="13 22"/>
                                    <area xml:id="auth.xml.sc.s.e.nr" units="linecolumn" coords="29 16"/>
                                </areaspec>
                                <programlisting language="xml">
                                    <xi:include href="samples/auth.xml" parse="text"/>
                                </programlisting>
                            </programlistingco>
                        </example>
                        <example>
                            <title>Auth Response: JSON</title>
                            <programlistingco>
                                <areaspec>
                                    <area xml:id="auth.json.token.expires" units="linecolumn" coords="6 52"/>
                                    <area xml:id="auth.json.sc.s.e.region" units="linecolumn" coords="11 38"/>
                                    <area xml:id="auth.json.sc.s.e.v1d" units="linecolumn" coords="12 40"/>
                                    <area xml:id="auth.json.sc.s.e.pu" units="linecolumn" coords="13 32"/>
                                    <area xml:id="auth.json.sc.s.e.iu" units="linecolumn" coords="14 34"/>
                                    <area xml:id="auth.json.sc.s.e.nr" units="linecolumn" coords="33 31"/>
                                </areaspec>
                                <programlisting language="javascript">
                                    <xi:include href="samples/auth.json" parse="text"/>
                                </programlisting>
                            </programlistingco>
                        </example>
                        <calloutlist>
                            <callout arearefs="auth.xml.token.expires">
                                <para>
                                    Tokens are valid for a finite duration. The
                                    <code>expires</code>
                                    attribute denotes the time after which the token will automatically become invalid.
                                    A token may be manually revoked before the time identified by the
                                    <code>expires</code>
                                    attribute;
                                    <code>expires</code>
                                    predicts a token's maximum possible lifespan but does not guarantee that it will
                                    reach that lifespan. Clients are encouraged to cache a token until it expires.
                                </para>
                            </callout>
                            <callout arearefs="auth.xml.sc.s.e.region">
                                <para>
                                    A service may expose endpoints in different regions. Regional endpoints allow
                                    clients to provision resources in a manner that provides high availability.
                                </para>
                            </callout>
                            <callout arearefs="auth.xml.sc.s.e.v1d">
                                <para>
                                    The
                                    <code>v1Default</code>
                                    attribute denotes that an endpoint is being returned in version 1.0 of the Cloud
                                    Authentication Service. The default value of
                                    <code>v1Default</code>
                                    is
                                    <code>false</code>
                                    ; clients should assume the value is
                                    <code>false</code>
                                    when the attribute is missing. Auth 1.0 does not offer support for regional
                                    endpoints and therefore only returns one endpoint per service. Resources stored in
                                    endpoints where
                                    <code>v1Default</code>
                                    is
                                    <code>false</code>
                                    , will not be seen by Auth 1.0 clients.
                                </para>
                            </callout>
                            <callout arearefs="auth.xml.sc.s.e.pu auth.xml.sc.s.e.iu">
                                <para>
                                    An endpoint can be assigned public and internal URLs. A public URL is accessible
                                    from anywhere. Access to a public URL usually incurs traffic charges. Internal URLs
                                    are only accessible to services within the same region. Access to an internal URL is
                                    free of charge.
                                </para>
                            </callout>
                            <callout arearefs="auth.xml.sc.s.e.nr">
                                <para>
                                    Some services are not region-specific. These services supply a single non-regional
                                    endpoint and do not provide access to internal URLs.
                                </para>
                            </callout>
                        </calloutlist>
                    </para>
                </example>
                <para>Authentication tokens are typically valid for 24 hours. Applications should be
                    designed to re-authenticate after receiving a <returnvalue>401</returnvalue>
                    (Unauthorized) response from a service endpoint. </para>
                <note>
                    <para>Currently, service endpoints are not published in the response of the account
                        number, which is a required element of the service endpoints.
                    </para>
                </note>
            </section>
        </section>
        <section xml:id="Service_Access_Endpoints-d1e517">
            <title>Service Access/Endpoints</title>
            <para>The load balancing service is a regionalized service. It allows the caller
                to select a region into which a load balancer is to be provisioned.
            </para>
            <para>To determine which region to operate against, select
                an endpoint from the table below. Replace the sample
                account ID number, <parameter>1234</parameter>, with
                your actual account number returned as part of the
                authentication service response. You will find the
                actual account number after the final '/' in the
                X-Server-Management-Url header returned by the
                authentication response. In <xref
                    linkend="authentication_response"/>, the account
                id is <code>1234</code>, as you can see from the
                header <code xmlns:svg="http://www.w3.org/2000/svg"
                    xmlns:m="http://www.w3.org/1998/Math/MathML"
                    xmlns:html="http://www.w3.org/1999/xhtml"
                    >X-Server-Management-Url:
                    https://servers.api.rackspacecloud.com/v1.0/1234</code>.<table
                    rules="all" >
                    <?dbfo keep-together="always"?>
                    <caption>Regionalized Service Endpoints</caption>
                    <thead>
                        <tr align="center">
                            <td colspan="1">Region</td>
                            <td colspan="4">Endpoint</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">Chicago (ORD)</td>
                            <td colspan="4"
                                   ><code>https://ord.loadbalancers.api.rackspacecloud.com/v1.0/</code><parameter>1234</parameter>/
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">Dallas/Ft. Worth
                                (DFW)</td>
                            <td colspan="4"
                                   ><code>https://dfw.loadbalancers.api.rackspacecloud.com/v1.0/</code><parameter>1234</parameter>/
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">London (LON)</td>
                            <td colspan="4"
                                   ><code>https://lon.loadbalancers.api.rackspacecloud.com/v1.0/</code><parameter>1234</parameter>/
                            </td>
                        </tr>
                    </tbody>
                </table>
            </para>
            <para>
                <emphasis role="bold">If load balancing Cloud Servers</emphasis>, you can determine the
                appropriate region to select by viewing your Cloud Servers list and creating a load
                balancer within the same region as the data center in which your Cloud Server
                resides. When your resources reside in the same region as your load balancer, devices are in close proximity to each other and can take
                advantage of ServiceNet connectivity for free data transfer between services.
            </para>
            <para>
                <emphasis role="bold">If load balancing external servers</emphasis>, you can determine the
                appropriate region to select by choosing the region that is geographically as close to your
                external servers as possible.
            </para>
        </section>
        <section xml:id="Request_Response_Types-d1e591">
            <title>Request/Response Types</title>
            <para>The Rackspace Cloud Load Balancers API supports both the JSON and XML data serialization
                formats. The request format is specified using the
                <code>Content-Type</code>
                header and is required for operations that have a request body. The response format can be
                specified in requests using either the
                <code>Accept</code>
                header or adding an
                <code>.xml</code>
                or
                <code>.json</code>
                extension to the request URI. Note that it is possible for a response to be serialized using
                a format different from the request. If no response format is specified, JSON is the default.
                If conflicting formats are specified using both an
                <code>Accept</code>
                header and a query extension, the query extension takes precedence.
            </para>
            <para>Some operations support an Atom representation that can be used to efficiently determine when
                the state of services has changed.
            </para>
            <table rules="all">
                <caption>JSON and XML Response Formats</caption>
                <thead>
                    <tr align="center">
                        <td>Format</td>
                        <td>Accept Header</td>
                        <td>Query Extension</td>
                        <td>Default</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>JSON</td>
                        <td>application/json</td>
                        <td>.json</td>
                        <td>Yes</td>
                    </tr>
                    <tr align="left">
                        <td>XML</td>
                        <td>application/xml</td>
                        <td>.xml</td>
                        <td>No</td>
                    </tr>
                    <tr align="left">
                        <td>Atom</td>
                        <td>application/atom+xml</td>
                        <td>.atom</td>
                        <td>No</td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section xml:id="Content_Compression-d1e690">
            <title>Content Compression</title>
            <para>
                Request and response body data may be encoded with gzip compression to accelerate
                interactive performance of API calls and responses. This is controlled using the
                <code>Accept-Encoding</code>
                header in the request from the client and indicated by the
                <code>Content-Encoding</code>
                header in the server response. Unless the header is explicitly set, encoding defaults to disabled.
            </para>
            <table rules="all">
                <?dbfo keep-together="always"?>
                <caption>Encoding Headers</caption>
                <thead>
                    <tr align="center">
                        <td>Header Type</td>
                        <td>Name</td>
                        <td>Value</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>HTTP/1.1 Request</td>
                        <td>
                            <code>Accept-Encoding</code>
                        </td>
                        <td>
                            <code>gzip</code>
                        </td>
                    </tr>
                    <tr align="left">
                        <td>HTTP/1.1 Response</td>
                        <td>
                            <code>Content-Encoding</code>
                        </td>
                        <td>
                            <code>gzip</code>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section xml:id="Persistent_Connections-d1e765">
            <title>Persistent Connections</title>
            <para>
                By default, the API supports persistent connections via <code>HTTP/1.1</code> keepalives.
                All connections will be kept alive unless the connection header is set to close.
            </para>
            <para>
                To prevent abuse, HTTP sessions have a timeout of 20 seconds before being closed.
            </para>
            <note>
                <para>
                    The server may close the connection at any time and clients should not rely on this behavior.
                </para>
            </note>
        </section>
        <section xml:id="Paginated_Collections-d1e786">
            <title>Paginated Collections</title>
            <para>To reduce load on the service, list operations will return a maximum of 100 items
                at a time. To navigate the collection, the
                <code>limit</code>
                and
                <code>marker</code>
                parameters (for example,
                <code>?limit=50&amp;marker=1</code>
                ) can be set in the URI. If a marker beyond the end of a list is given, an empty list is
                returned. Note that list operations never return
                <returnvalue>404</returnvalue>
                (itemNotFound) faults.
            </para>
        </section>
        <section xml:id="Limits-d1e807">
            <title>Limits</title>
            <para>All accounts, by default, have a preconfigured set of thresholds (or limits) to
                manage capacity and prevent abuse of the system. The system recognizes two kinds of
                limits: rate limits and absolute limits. Rate limits are thresholds that are reset
                after a certain amount of time passes. Absolute limits are fixed.
            </para>
            <note>
                <para>
                    If the default limits are too low for your particular application, please contact
                    Rackspace Cloud support to request an increase. All requests require reasonable
                    justification.
                </para>
            </note>
            <section xml:id="Rate_Limits-d1e821">
                <title>Rate Limits</title>
                <para>
                    We specify rate limits in terms of both a
                    human-readable wild-card URI and a
                    machine-processable regular expression. The
                    regular expression boundary matcher '^' takes
                    effect after the root URI path. For example, the
                    regular expression
                    <code>^/v1.0/1234/loadbalancers</code>
                    would match the bolded portion of the following URI:
                    <code>https://ord.loadbalancers.api.rackspacecloud.com</code>
                    <emphasis role="bold"><code>/v1.0/1234/loadbalancers</code></emphasis>.
                </para>
                <table rules="all">
                    <caption>Default Rate Limits</caption>
                    <?dbfo keep-together="always"?>
                    <thead>
                        <tr align="center">
                            <td>Verb</td>
                            <td>URI</td>
                            <td>RegEx</td>
                            <td>Default Limit</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td>&GET;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>5/second</td>
                        </tr>
                        <tr align="left">
                            <td>&GET;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>100/minute</td>
                        </tr>
                        <tr align="left">
                            <td>&POST;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>2/second</td>
                        </tr>
                        <tr align="left">
                            <td>&POST;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>25/minute</td>
                        </tr>
                        <tr align="left">
                            <td>&PUT;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>5/second</td>
                        </tr>
                        <tr align="left">
                            <td>&PUT;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>50/minute</td>
                        </tr>
                        <tr align="left">
                            <td>&DELETE;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>2/second</td>
                        </tr>
                        <tr align="left">
                            <td>&DELETE;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>50/minute</td>
                        </tr>
                    </tbody>
                </table>
                <para>Rate limits are applied in order relative to the verb, going from least to most
                    specific. For example, although the threshold for &POST; to /v1.0/* is 25 per minute,
                    one cannot &POST; to /v1.0/* more than 2 times per second because the rate limit for any
                    &POST; is 2 per second. In the event you exceed the thresholds established for your account, a
                    <errorcode>413</errorcode>
                    (Rate Control) HTTP response will be returned with a
                    <code>Retry-After</code>
                    header to notify the client when they can attempt to try again.
                </para>
                <para>A request may be submitted to Cloud Support for
                    an increase in load balancer limits. Each request
                    must be approved before limits can be modified.
                    Limits may only be increased up to the maximum
                    limit (such as 50 nodes per load balancer). </para>
                <para>Refer to <xref
                        linkend="Determining_Limits_Programmatically-d1e1039"
                    /> to find your current account settings for these
                    limits.</para>
            </section>
            <section xml:id="Absolute_Limits-d1e999">
                <title>Absolute Limits</title>
                <para>Absolute limits specify the maximum number of
                    load balancers that can exist per Cloud account
                    and the maximum number of resources that can exist
                    per load balancer. The batch delete limit is the
                    exception, since it is applied per batch delete
                    API request.</para>
                <para>The system applies default values for load
                    balancer account and/or resource limits that can
                    be increased by submitting a request to Cloud
                    Support. Each request must be approved internally
                    before limits can be modified. </para>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="2">Name</td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Default Limit</td>

                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="2">LOADBALANCER_LIMIT</td>
                            <td colspan="3">Total number of load
                                balancers that can be added to a Cloud
                                account.</td>
                            <td colspan="1">25</td>

                        </tr>
                        <tr align="left">
                            <td colspan="2">NODE_LIMIT</td>
                            <td colspan="3">Total number of nodes that
                                can be added to a load balancer.</td>
                            <td colspan="1">25</td>

                        </tr>
                        <tr align="left">
                            <td colspan="2">IPV6_LIMIT</td>
                            <td colspan="3">Total number of IPV6
                                addresses that can be added to a load
                                balancer.</td>
                            <td colspan="1">25</td>

                        </tr>
                        <tr align="left">
                            <td colspan="2">BATCH_DELETE_LIMIT</td>
                            <td colspan="3">Total number of resources
                                that can be listed per batch delete
                                request.</td>
                            <td colspan="1">10</td>

                        </tr>
                        <tr align="left">
                            <td colspan="2">ACCESS_LIST_LIMIT</td>
                            <td colspan="3">Total number of network
                                items that can be added to a load
                                balancer.</td>
                            <td colspan="1">100</td>

                        </tr>
                    </tbody>
                </informaltable>
                <para>Refer to <xref
                        linkend="Determining_Limits_Programmatically-d1e1039"
                    /> to find your current account settings for these
                    limits.</para>
            </section>
            <section xml:id="Determining_Limits_Programmatically-d1e1039">
                <title>Determining Limits Programmatically</title>
                <para> Applications can programmatically determine
                    current rate limits and absolute limits for an
                    account using the following URIs: </para>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="1">URI</td>
                            <td colspan="3">Description </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="1">/limits</td>
                            <td colspan="3">Return the current rate limits for the account.</td>
                        </tr>
                         <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="1">/absolutelimits</td>
                            <td colspan="3">Return the current absolute limits for the account.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para> These operations do not require a request body. </para>
                <example>
                    <title>List Rate Limits Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-limits-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Rate Limits Response: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-limits-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Absolute Limits Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-absolute-limits-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Absolute Limits Response: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-absolute-limits-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="Faults-d1e1140">
            <title>Faults</title>
            <para> API calls that return an error return one of the following fault objects. All
                fault objects extend from the base fault, <code>serviceFault</code>, for easier
                exception handling for languages that support it. </para>
            <section xml:id="serviceFault-d1e1151">
                <title>
                    serviceFault
                </title>
                <para>
                    The
                    <code>serviceFault</code>
                    and by extension all other faults include
                    <code>message</code>
                    and
                    <code>detail</code>
                    elements which contain strings describing the nature of the fault
                    as well as a
                    <code>code</code>
                    attribute representing the HTTP response code for convenience.
                    The
                    <code>code</code>
                    attribute of the fault is for the convenience of the caller so that they may retrieve the response
                    code from the HTTP response headers
                    or directly from the fault object if they choose.
                    The caller should not expect the
                    <code>serviceFault</code>
                    to be returned directly but should instead expect only one of the child faults to be returned.
                </para>
            </section>
            <section xml:id="badRequest-d1e1179">
                <title>
                    badRequest
                </title>
                <para>This fault indicates that the data in the request object is invalid; for example,
                    a string was used in a parameter that was expecting an integer. The fault will wrap
                    validation errors.
                </para>
                <example>
                    <title>Fault Response, badRequest</title>
                    <?dbfo keep-together="always"?>
                <literallayout class="monospaced">
<![CDATA[<badRequest xmlns="http://docs.openstack.org/loadbalancers/api/v1.0" code="400">
    <message>Validation fault</message>
    <details>The object is not valid</details>
        <validationErrors>
            <message>Node ip is invalid. Please specify a valid ip.</message>
        </validationErrors>
</badRequest>]]>
                </literallayout>
                    </example>
            </section>
            <section xml:id="immutableEntity-d1e1197">
                <title>
                    immutableEntity
                </title>
                <para>
                    This fault is returned when a user attempts to modify an item that is not currently in a state
                    that allows modification. For example, load balancers in a status of
                    <code>PENDING_UPDATE</code>,<code>BUILD</code>, or
                    <code>DELETED</code>
                    may not be modified.
                </para>
                <example>
                    <title>Fault Response, immutableEntity</title>
                    <literallayout class="monospaced">
<![CDATA[<immutableEntity code="422" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>The object at the specified URI is immutable and can not be overwritten.</message>
</immutableEntity>]]>
                </literallayout>
                </example>
            </section>
            <section xml:id="itemNotFound-d1e1225">
                <title>
                    itemNotFound
                </title>
                <example>
                    <title>Fault Response, itemNotFound</title>
                <literallayout class="monospaced">
<![CDATA[<itemNotFound code="404" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>Object not Found</message>
</itemNotFound>]]>
                </literallayout>
                    </example>
            </section>
            <section xml:id="loadBalancerFault-d1e1240">
                <title>
                    loadBalancerFault
                </title>
                <para> The <code>loadBalancerFault</code> fault shall
                    be returned in the event that an error occurred
                    during a load balancer operation. </para>
                <example>
                    <title>Fault Response, loadBalancerFault</title>
                    <literallayout class="monospaced">
<![CDATA[<loadBalancerFault code="401" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>Invalid authentication token. Please renew</message>
</loadBalancerFault>]]>
                </literallayout>
                </example>
            </section>
            <section xml:id="outOfVirtualIps-d1e1261">
                <title>
                    outOfVirtualIps
                </title>
                <para>This fault indicates that there are no virtual IPs left to assign to a new
                    load balancer. In practice, this fault should not occur, as virtual IPs will be
                    ordered as capacity is required. If you do experience this fault, contact support so
                    that we may make more IPs available.
                </para>
                <example>
                    <title>Fault Response, outOfVirtualIps</title>
                <literallayout class="monospaced">
<![CDATA[<outOfVirtualIps code="500" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>
        Out of virtual IPs. Please contact support so they can allocate more virtual IPs.
    </message>
</outOfVirtualips>]]>
                </literallayout>
                    </example>
            </section>
            <section xml:id="overLimit-d1e1279">
                <title>
                    overLimit
                </title>
                <para>
                    This fault is returned when the user has exceeded a currently allocated limit.
                </para>
                <example>
                    <title>Fault Response, overLimit</title>
                    <literallayout class="monospaced">
<![CDATA[<overLimit code="413" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>Your account is currently over the limit so your request could not be processed.</message>
</overLimit>]]>
                </literallayout>
                </example>
            </section>
            <section xml:id="serviceUnavailable-d1e1297">
                <title>
                    serviceUnavailable
                </title>
                <para>
                    This fault is returned when the service is unavailable, such as when the service is undergoing
                    maintenance. Note that this does not necessarily mean that the currently configured loadbalancers
                    are unable to process traffic; it simply means that the API is currently unable to service
                    requests.
                </para>
                <example>
                    <title>Fault Response, serviceUnavailable</title>
                    <?dbfo keep-together="always"?>
                <literallayout class="monospaced">
<![CDATA[<serviceUnavailable code="500" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>The Load balancing service is currently not available</message>
</serviceUnavailable>]]>
                </literallayout>
                    </example>
            </section>
            <section xml:id="unauthorized-d1e1315">
                <title>
                    unauthorized
                </title>
                <para>
                    This fault is returned when the user is not authorized to perform an attempted operation.
                </para>
                <example>
                    <title>Fault Response, unauthorized</title>
                    <?dbfo keep-together="always"?>
                    <literallayout class="monospaced">
<![CDATA[<unauthorized code="404" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>You are not authorized to execute this operation.</message>
</unauthorized>]]>
                </literallayout>
                </example>
            </section>
            <section xml:id="unprocessableEntity-d1e1334">
                <title>
                    unprocessableEntity
                </title>
                <para>
                    This fault is returned when an operation is requested on an item that does not support the
                    operation, but the request is properly formed.
                </para>
                <example>
                    <title>Fault Response, unprocessableEntity</title>
                    <literallayout class="monospaced">
<![CDATA[<unprocessableEntity code="422" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>The Object at the specified URI is unprocessable.</message>
</unprocessableEntity>]]>
                </literallayout>
                </example>
            </section>
        </section>
        <section xmlns:svg="http://www.w3.org/2000/svg"
            xmlns:m="http://www.w3.org/1998/Math/MathML"
            xmlns:html="http://www.w3.org/1999/xhtml" xml:id="Date_Time_Format">
            <title>Date/Time Format</title>
            <para> The Load Balancer service uses an ISO-8601
                compliant date format for the display and consumption
                of date/time values. </para>
            <example>
                <title>Load Balancer Service Date/Time Format</title>
                <programlisting>yyyy-MM-dd'T'HH:mm:ssZ</programlisting>
                <para>See the table below for a description of the
                    date/time format codes.</para>
                <para>May 19th, 2011 at 8:07:08 AM, GMT-5 would have
                    the following format:</para>
                <programlisting>2011-05-19T08:07:08-0500</programlisting>
            </example>
            <table rules="all">
                <caption>Explanation of Date/Time Format
                    Codes</caption>
                <thead>
                    <tr>
                        <td>Code</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>yyyy</td>
                        <td>Four digit year</td>
                    </tr>
                    <tr>
                        <td>MM</td>
                        <td>Two digit month</td>
                    </tr>
                    <tr>
                        <td>dd</td>
                        <td>Two digit day of month</td>
                    </tr>
                    <tr>
                        <td>T</td>
                        <td>Separator for date/time</td>
                    </tr>
                    <tr>
                        <td>HH</td>
                        <td>Two digit hour of day (00-23)</td>
                    </tr>
                    <tr>
                        <td>mm</td>
                        <td>Two digit minutes of hour</td>
                    </tr>
                    <tr>
                        <td>ss</td>
                        <td>Two digit seconds of the minute</td>
                    </tr>
                    <tr>
                        <td>Z</td>
                        <td>RFC-822 timezone (offset from GMT)</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </chapter>
    <chapter xml:id="API_Operations-d1e1354">
        <title>API Operations</title>
        <para>This chapter explains specific API operations. For ideas relevant to all API operations, see the "General API Information" chapter.</para>
        <section xml:id="Load_Balancers-d1e1362">
            <title>Load Balancers</title>
        <section xml:id="List_Load_Balancers-d1e1367">
            <title>List Load Balancers</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Representation</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="3">/loadbalancers</td>
                        <td colspan="3">List all load balancers configured for the account (IDs, names and
                            status only).</td>
                        <td colspan="2">XML, JSON, Atom</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para> This operation provides a list of all load
                    balancers configured and associated with your
                    account. </para>
                <para>A limited set of load balancer attributes
                    including the following are returned in the
                    response object: </para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>
                            <code>name</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>id</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>status</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>created</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>updated</code>
                        </para>
                    </listitem>
                </itemizedlist>
                <para> This operation does not require a request body. </para>
                <para>List load balancer example responses are shown
                    below:</para>
                <example>
                    <title>List Load Balancers Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-response.xml" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>List Load Balancers Response: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-list-response.json" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>List Atom Load Balancers Response:
                        XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-loadbalancer.xml" parse="text"/>
                </programlisting>
                </example>
                <para>A <emphasis>changes-since</emphasis> query
                    parameter is supported that lists all load
                    balancers that have changed since the specified
                    date/time. For example, using the URI
                        <code>/loadbalancers?changes-since=2011-05-19T08:07:08-0500</code>
                    lists all load balancers that have changed since
                    May 19th, 2011 at 8:07:08 AM, GMT-5. Refer to
                        <xref linkend="Date_Time_Format"/> for
                    information about specifying the date/time.</para>
            <para> To view deleted load balancers, add the query
                    parameter <code>?status=DELETED</code> to the end
                    of the URI. A deleted load balancer is immutable
                    and irrecoverable. </para>
            <para> To find out if any load balancer for an account has
                    a specific node attached to it, use the query
                    parameter <emphasis>nodeaddress</emphasis> to
                    specify the IP address for the desired node. For
                    example, using the URI
                        <code>/loadbalancers?nodeaddress=10.1.1.1</code>
                    will search all load balancers for the account for
                    a node with IP address 10.1.1.1, and return a list
                    including the id, name, and status of all load
                    balancers attached:</para>
            <example>
                <title>List Load Balancers With Node Specified:
                XML</title>
                <?dbfo keep-together="always"?>
                <programlisting language="xml">
<xi:include href="samples/lb-list-response-with-node.xml" parse="text" />
                </programlisting>
            </example>
            <example>
                <title>List Load Balancers With Node Specified:
                        JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-response-with-node.json" parse="text" />
                </programlisting>
            </example>
        </section>
        <section xml:id="List_Load_Balancer_Details-d1e1522">
            <title>List Load Balancer Details</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Representations</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;
                        </td>
                        <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId</parameter></td>
                        <td colspan="3">List details of the specified load balancer.</td>
                        <td colspan="2">JSON, XML, Atom</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>This operation provides detailed output for a specific load balancer
                configured and associated with your account. This operation is not capable of
                returning details for a load balancer which has been deleted.
            </para>
            <para>
                This operation does not require a request body.
            </para>
                <para>Notice in the following examples that API users
                    are now able to programmatically derive the source
                    IP addresses of our load balancers using the
                        <code>sourceAddresses</code> label included at
                    the bottom of the list load balancer details
                    response. This feature is useful for customers who
                    are automating the deployment of infrastructure
                    and need to determine the IP addresses of requests
                    coming from our load balancers for the purpose of
                    creating more robust firewall rules.</para>
            <annotation>
                <remark>
                        For 2011-06-29 republication to support IPv6, "security=writeronly"
                        prevented draft changes to this XML from appearing in generated PDF and
                        HTML. That doesn't work within sample code, so one-line changes were made to
                        delete reference to "sourceAddress' in included samples:
                        lb-list-details-request.xml (delete line 42 &lt;sourceAddresses
                        ipv4Servicenet="178.1.1.1" ipv6Servicenet="::1" ipv4Public="192.1.1.1"
                        ipv6Public="fd24:f480:ce44:91bc:711b:be4c:0000:007b"/> )
                        lb-list-details-response.json (delete lines 57-62  "sourceAddresses":{
                        "ipv6Servicenet":"::1",
                        "ipv6Public":"fd24:f480:ce44:91bc:711b:be4c:0000:007b",
                        "ipv4Servicenet":"178.1.1.1", "ipv4Public":"192.1.1.1" })
                </remark>
            </annotation>
            <example>
                <title>List Load Balancer Details Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-details-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Load Balancers Details Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-details-response.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Atom Load Balancer Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-loadbalancer-id.xml" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section xml:id="Create_Load_Balancer-d1e1635">
            <title>Create Load Balancer</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&POST;
                        </td>
                        <td colspan="3">/loadbalancers</td>
                        <td colspan="3">Create a new load balancer with the configuration defined by the request.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>This operation asynchronously provisions a new load
                    balancer based on the configuration defined in the
                    request object. Once the request is validated and
                    progress has started on the provisioning process,
                    a response object will be returned. The object
                    will contain a unique identifier and status of the
                    request. Using the identifier, the caller can
                    check on the progress of the operation by
                    performing a &GET; on
                        <code>loadbalancers/id</code>. If the
                    corresponding request cannot be fulfilled due to
                    insufficient or invalid data, an <code>HTTP</code>
                    <returnvalue>400 (Bad Request)</returnvalue> error
                    response will be returned with information
                    regarding the nature of the failure in the body of
                    the response. Failures in the validation process
                    are non-recoverable and require the caller to
                    correct the cause of the failure and &POST; the
                    request again. </para>
                <para>An HTTP load balancer will have the
                    X-Forwarded-For (XFF) HTTP header set by default.
                    This header will contain the actual source address
                    of the client, which many web applications are
                    already designed to use when determining the
                    source address for a request. </para>
            <note>
                <para>
                    A load balancer's name must be less than or equal to 128 characters.
                </para>
            </note>
            <note>
                <para>
                    Users may configure all documented features of the load balancer at creation
                    time by simply providing the additional elements or attributes in the
                    request. This document provides an overview of all the features the load
                    balancing service supports.
                </para>
            </note>
            <para>
                You may specify the type of virtualIp to add along with the creation of a loadbalancer.
                The following table describes the options.
            </para>
            <table rules="all" xml:id="table_virtual_ip_types">
                <caption>Virtual IP Types</caption>
                <thead align="center">
                    <tr>
                    <td>Version</td>
                    <td>Type</td>
                    <td>Outcome</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>Not Specified</td>
                        <td>PUBLIC</td>
                        <!-- Remove the comment tags below when the functionality returns -->
                        <td>IPV4<!-- &amp; IPV6--></td>
                    </tr>
                    <tr align="left">
                        <td>IPV4</td>
                        <td>PUBLIC</td>
                        <td>IPV4</td>
                    </tr>
                    <tr align="left">
                        <td>IPV6</td>
                        <td>PUBLIC</td>
                        <td>IPV6</td>
                    </tr>
                    <tr align="left">
                        <td>Not Specified</td>
                        <td>SERVICENET</td>
                        <td>IPV4</td>
                    </tr>
                    <tr align="left">
                        <td>IPV4</td>
                        <td>SERVICENET</td>
                        <td>IPV4</td>
                    </tr>
                    <tr align="left">
                        <td>IPV6</td>
                        <td>SERVICENET</td>
                        <td>Failure Message</td>
                    </tr>
                </tbody>
            </table>
            <annotation>
                <remark> For 2011-06-29 republication to support IPv6, "security=writeronly"
                        prevented draft changes to this XML from appearing in generated PDF and
                        HTML. That doesn't work within sample code, so one-line changes were made to
                        delete reference to "sourceAddress' in included samples:
                        lb-create-required-response.xml (delete line 15  &lt;sourceAddresses
                        ipv4Servicenet="178.1.1.1" ipv6Servicenet="::1" ipv4Public="192.1.1.1"
                        ipv6Public="fd24:f480:ce44:91bc:711b:be4c:0000:007b"/> )
                        lb-create-required-response.json (delete lines 40-45 "sourceAddresses":{
                        "ipv6Servicenet":"::1",
                        "ipv6Public":"fd24:f480:ce44:91bc:711b:be4c:0000:007b",
                        "ipv4Servicenet":"178.1.1.1", "ipv4Public":"192.1.1.1" },) </remark>
            </annotation>
            <example>
                <title>Create Load Balancer (Required Attributes) Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-required-request.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Create Load Balancer (Required Attributes) Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-create-required-request.json" parse="text"/>
                </programlisting>
            </example>
                <para>Notice in the following examples that API users
                    are now able to programmatically derive the source
                    IP addresses of our load balancers using the
                        <code>sourceAddresses</code> label included at
                    the bottom of the create load balancer (required
                    attributes) response. This feature is useful for
                    customers who are automating the deployment of
                    infrastructure and need to determine the IP
                    addresses of requests coming from our load
                    balancers for the purpose of creating more robust
                    firewall rules.</para>
            <example>
                <title>Create Load Balancer (Required Attributes) Response: XML</title>
                <?dbfo keep-together="always"?>
                <programlisting language="xml">
<xi:include href="samples/lb-create-required-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Create Load Balancer (Required Attributes) Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-create-required-response.json" parse="text"/>
                </programlisting>
            </example>
            <para>To conserve IPv4 address space, Rackspace highly recommends sharing Virtual IPs
                    between your load balancers. If you have at least one load balancer, you may
                    create subsequent load balancers that share a single virtual IP by issuing a
                    &POST; and supplying a virtual IP ID instead of a type. Additionally, this
                    feature is highly desirable if you wish to load balance both an unsecured and
                    secure protocol using one IP or DNS name. For example, this method makes it
                    possible to use the same load balancing configuration to support
                        <code>HTTP</code> and <code>HTTPS</code>). </para>
            <note>
                <para>
                    Load balancers sharing a virtual IP
                    <emphasis>must</emphasis>
                    utilize a unique port.
                </para>
            </note>
            <example>
                <title>Create Load Balancer (Required Attributes with Shared IP) Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-required-sharedip-request.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Create Load Balancer (Required Attributes with Shared IP) Request: JSON</title>
                <?dbfo keep-together="always"?>
                <programlisting language="javascript">
<xi:include href="samples/lb-create-required-sharedip-request.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Create Load Balancer (Required Attributes with Shared IP) Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-required-sharedip-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Create Load Balancer (Required Attributes with Shared IP) Response:
                        JSON</title>
                <programlisting>
<xi:include href="samples/lb-create-required-sharedip-response.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section xml:id="Update_Load_Balancer_Attributes-d1e1812">
                <title>Update Load Balancer Attributes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&PUT;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter></td>
                            <td colspan="3">Update the properties of a load balancer.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para> This operation asynchronously updates the attributes of the specified load
                    balancer. Upon successful validation of the request, the service will return a
                        <returnvalue>202 (Accepted)</returnvalue> response code. A caller can poll
                    the load balancer with its ID to wait for the changes to be applied and the load
                    balancer to return to an <code>ACTIVE</code> status.</para>
                <para>
                    This operation allows the caller to change one or more of the following attributes:
                </para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>
                            <code>name</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>algorithm</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>protocol</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>port</code>
                        </para>
                    </listitem>
                </itemizedlist>
                <para>
                    This operation does not return a response body.
                </para>
                <note>
                    <para>
                        The load balancer's ID and status are immutable attributes and cannot be modified by the
                        caller. Supplying an unsupported attribute will result in a
                        <returnvalue>400 (badRequest)</returnvalue>
                        fault.
                    </para>
                </note>
                <example>
                    <title>Update Load Balancer Attributes Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-update-lb-attributes-request.xml" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>Update Load Balancer Attributes Request: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="javascript">
<xi:include href="samples/lb-update-lb-attributes-request.json" parse="text"/>
                </programlisting>
                </example>
                <para>All load balancers also have a status attribute to signify the current
                    configuration status of the device. This status is immutable by the caller and is
                    updated automatically based on state changes within the service. When a load
                    balancer is first created, it will be placed into a <code>BUILD</code> status while
                    the configuration is being generated and applied based on the request. Once the
                    configuration is applied and finalized, it will be in an <code>ACTIVE</code> status.
                    In the event of a configuration change or update, the status of the load balancer
                    will change to <code>PENDING_UPDATE</code> to signify configuration changes are in
                    progress but have not yet been finalized. Load balancers in a <code>SUSPENDED</code>
                    status are configured to reject traffic and will not forward requests to back-end
                    nodes. </para>
                <table rules="all">
                    <caption>Load Balancer Statuses</caption>
                    <thead>
                        <tr align="center">
                            <td colspan="1">Name</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                <code>ACTIVE</code>
                            </td>
                            <td colspan="3">
                                Load balancer is configured properly and ready to serve traffic to incoming requests
                                via the configured virtual IPs.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>BUILD</code>
                            </td>
                            <td colspan="3">
                                Load balancer is being provisioned for the first time and configuration is being
                                applied to bring the service online. The service will not yet be ready to serve
                                incoming requests.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>PENDING_UPDATE</code>
                            </td>
                            <td colspan="3"> Load balancer is online but configuration changes are
                                being applied to update the service based on a previous request. </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>PENDING_DELETE</code>
                            </td>
                            <td colspan="3"> Load balancer is online but configuration changes are
                                being applied to begin deletion of the service based on a previous
                                request. </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1" >
                                <code>SUSPENDED</code>
                            </td>
                            <td colspan="3">
                                Load balancer has been taken offline and disabled; contact Support.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>ERROR</code>
                            </td>
                            <td colspan="3">
                                The system encountered an error when attempting to configure the load
                                balancer; contact Support.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>DELETED</code>
                            </td>
                            <td colspan="3"> Load balancers in <code>DELETED</code> status can be
                                displayed for at least 90 days after deletion. </td>
                        </tr>
                    </tbody>
                </table>
        </section>
            <section xml:id="Remove_Load_Balancer-d1e2093">
                <title>Remove Load Balancer</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&DELETE;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter></td>
                            <td colspan="3">Remove a load balancer from the account.</td>
                        </tr>
                        <tr align="left">
                        <td colspan="1">&BATCH_DELETE;
                        </td>
                        <td colspan="3">
                            /loadbalancers?id=<parameter>loadBalancerId</parameter>
                        </td>
                        <td colspan="3">Batch delete load balancers given specified id list.</td>
                    </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    The remove load balancer function removes the specified load balancer and its associated
                    configuration from the account. Any and all configuration data is immediately purged and
                    is not recoverable.
                </para>
                <para> To batch delete load balancers, provide a query
                    parameter list of load balancer ids. For example:
                        /loadbalancers?id=<parameter>loadBalancerId</parameter>&amp;id=<parameter>loadBalancerId</parameter>
                    The current default limit is ten ids per request.
                    Any and all configuration data is immediately
                    purged and is not recoverable. By chance one of
                    the items in the list cannot be removed due to its
                    current status a 400:BadRequest is returned along
                    with the ids of the ones the system identified as
                    potential failures for this request. </para>
                <para>
                    This operation does not require a request body.
                </para>
                <para>
                    This operation does not return a response body.
                </para>
            </section>
        </section>
        <section xml:id="Erropage-d1e666">
            <title>Error Page</title>
            <para>An error page is the html file that is shown to an
                end user who is attempting to access a load balancer
                node that is offline/unavailable.</para>
            <section xml:id="default_error_page">
                <title>Default Error Page</title>
                <para>During provisioning, every load balancer is
                    configured with a default error page that gets
                    displayed when traffic is requested for an offline
                    node.</para>
            </section>
            <section xml:id="custom_error_page">
                <title>Custom Error Page</title>
                <para>A single custom error page may be added per
                    account load balancer with an HTTP protocol. Page
                    updates will override existing content. If a
                    custom error page is deleted, or the load balancer
                    is changed to a non-HTTP protocol, the default
                    error page will be restored.</para>
            </section>

             <section xml:id="List_Errorpage-d1e2218">
                <title>Error Page Operations</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/errorpage</td>
                            <td colspan="3">List error page configured
                                for the specified load balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                &PUT;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/errorpage</td>
                            <td colspan="3">Set custom error page for
                                the specified load balancer.</td>
                        </tr>
                         <tr align="left">
                            <td colspan="1">
                                &DELETE;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/errorpage</td>
                            <td colspan="3">Delete custom error page
                                for the specified load balancer.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <example>
                    <title>List Error Page  Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-error-page.xml" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>List Error Page Response: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-list-error-page.json" parse="text"/>
                </programlisting>
                </example>
                 <example>
                    <title>Add Error Page  Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-error-page.xml" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>Add Error Page Request: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-add-error-page.json" parse="text"/>
                </programlisting>
                </example>
                 <example>
                    <title>Add Error Page  Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-error-page.xml" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>Add Error Page Response: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-list-error-page.json" parse="text"/>
                </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="List_Load_Balancer_Stats-d1e1524">
            <title>Load Balancer Stats</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Representations</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/stats</td>
                        <td colspan="3">provides detailed stats output for a specific load balancer</td>

                        <td colspan="2">JSON, XML</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>This operation provides detailed stats output for a specific load balancer
                configured and associated with the users account.
            </para>
            <para><emphasis role="bold"> ConectTimeOut:</emphasis> Connections closed by this virtual server because the 'connect_timeout' interval was exceeded, for each of the named Virtualservers.</para>
            <para><emphasis role="bold">ConectError: </emphasis>Number of transaction or protocol errors in this virtual server, for each of the named Virtualservers.</para>
            <para><emphasis role="bold">ConectFailure: </emphasis>Number of connection failures in this virtual server, for each of the named Virtualservers.</para>
            <para><emphasis role="bold"> DataTimedOut: </emphasis>Connections closed by this virtual server because the 'timeout' interval was exceeded, for each of the named Virtualservers.</para>
            <para><emphasis role="bold">KeepAliveTimedOut: </emphasis>Connections closed by this virtual server because the 'keepalive_timeout' interval was exceeded, for each of the named Virtualservers.</para>
            <para><emphasis role="bold">maxConnections: </emphasis>Maximum number of simultaneous TCP connections this virtual server has processed at any one time, for each of the named Virtualservers.</para>

            <para>
                This operation does not require a request body.
            </para>

            <example>
                <title>List Load Balancer stats Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-stats.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Load Balancers Stats Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-stats.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section xml:id="Nodes-d1e2173">
            <title>Nodes</title>
            <para>The nodes defined by the load balancer are responsible for servicing the requests
                received through the load balancer's virtual IP. By default, the load balancer
                employs a basic health check that ensures the node is listening on its defined port.
                The node is checked at the time of addition and at regular intervals as defined by
                the load balancer health check configuration. If a back-end node is not listening on
                its port or does not meet the conditions of the defined active health check for the
                load balancer, then the load balancer will not forward connections and its status
                will be listed as <code>OFFLINE</code>. Only nodes that are in an
                <code>ONLINE</code> status will receive and be able to service traffic from the
                load balancer. </para>
            <para>All nodes have an associated status that indicates whether the node is
                <code>ONLINE</code>, <code>OFFLINE</code>, or <code>DRAINING</code>. Only nodes
                that are in <code>ONLINE</code> status will receive and be able to service traffic
                from the load balancer. The <code>OFFLINE</code> status represents a node that
                cannot accept or service traffic. A node in <code>DRAINING</code> status represents
                a node that stops the traffic manager from sending any additional new connections to
                the node, but honors established sessions. If the traffic manager receives a request
                and session persistence requires that the node is used, the traffic manager will use
                it. The status is determined by the passive or active health monitors. </para>
            <para>If the <code>WEIGHTED_ROUND_ROBIN</code> load balancer algorithm mode is
                selected, then the caller should assign the relevant weights to the node as part of
                the weight attribute of the node element. When the algorithm of the load balancer is
                changed to <code>WEIGHTED_ROUND_ROBIN</code> and the nodes do not already have an
                assigned weight, the service will automatically set the weight to "1" for all nodes.
            </para>
            <para security="writeronly">Nodes that are primary have the option of having a
                failover node. A failover node will take traffic from
                the specified primary node that has gone down or is in
                other error states. The user can specify multiple
                failover nodes when adding a node to a pre-configured
                load balancer. The first and last node must remain a
                primary node. If attempting to update or delete the
                last primary node, a BadRequestException is thrown,
                requiring at least one primary node to remain on the
                load balancer at all times. The weightings and
                conditions for a failover node can be specified
                independently from the primary node, allowing for a
                more robust configuration. </para>

            <section xml:id="List_Nodes-d1e2218">
                <title>List Nodes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes</td>
                            <td colspan="3">List node(s) configured for the load balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter></td>
                            <td colspan="3">List details of a specific node.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <note>
                    <para>The <code>weight</code> attributes are only
                        displayed for load balancers that use the
                            <code>WEIGHTED_LEAST_CONNECTIONS</code> or
                            <code>WEIGHTED_ROUND_ROBIN</code>
                        algorithms.</para>
                </note>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>List Node Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-node-response.xml" parse="text"/>
                </programlisting>
                </example>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>List Node Response: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="javascript">
<xi:include href="samples/lb-list-node-response.json" parse="text"/>
                </programlisting>
                </example>
                <example>
                <title>List Atom Node Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-node-id.xml" parse="text"/>
                </programlisting>
                </example>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>List Nodes Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-nodes-response.xml" parse="text"/>
                </programlisting>
                </example>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>List Nodes Response: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-list-nodes-response.json" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>List Atom Nodes Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-nodes.xml" parse="text"/>
                </programlisting>
                </example>
            </section>
            <section xml:id="Add_Nodes-d1e2379">
                <title>Add Nodes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &POST;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes</td>
                            <td colspan="3">Add a new node to the load balancer.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <para>When a node is added, it is assigned a unique identifier that can be used
                    for mutating operations such as changing the condition or removing it.
                    Every load balancer is dual-homed on both the public Internet and ServiceNet; as a
                    result, nodes can either be internal ServiceNet addresses or addresses on the public
                    Internet.
                </para>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>Add Nodes Request: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-nodes-request.xml" parse="text"/>
                </programlisting>
                </example>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>Add Nodes Request: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-add-nodes-request.json" parse="text"/>
                </programlisting>
                </example>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>Add Nodes Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-nodes-response.xml" parse="text"/>
                </programlisting>
                </example>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>Add Nodes Response: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="javascript">
<xi:include href="samples/lb-add-nodes-response.json" parse="text"/>
                </programlisting>
                </example>
            </section>
            <section xml:id="Modify_Nodes-d1e2503">
                <title>Modify Nodes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &PUT;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter></td>
                            <td colspan="3">Modify the configuration of a node on the load balancer.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <note>
                    <para>The node's IP and port are immutable attributes and cannot be modified with a
                        &PUT; request. Supplying an unsupported attribute will result in a
                        <returnvalue>400 (badRequest)</returnvalue> fault. A load balancer supports
                        a maximum of 25 nodes; the maximum weight of a node is 100. </para>
                </note>
                <para>Every node in the load balancer has an associated condition which determines
                    its role within the load balancer.
                </para>
                <table rules="all">
                    <caption>Load Balancer Node Conditions</caption>
                    <?dbfo keep-together="always"?>
                    <thead>
                        <tr align="center">
                            <td colspan="1">Name</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                <code>ENABLED</code>
                            </td>
                            <td colspan="3">Node is permitted to accept new connections.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>DISABLED</code>
                            </td>
                            <td colspan="3">Node is not permitted to accept any new connections
                                regardless of session persistence configuration. Existing connections
                                are forcibly terminated.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>DRAINING</code>
                            </td>
                            <td colspan="3">Node is allowed to service existing established connections
                                and connections that are being directed to it as a result of the session
                                persistence configuration.</td>
                        </tr>
                    </tbody>
                </table>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>Update Node Condition Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-update-node-request.xml" parse="text"/>
                </programlisting>
                </example>
                <para security="writeronly">Writer: need to update the
                    example below from the "Next Release /
                    future_exs_type_attribute" when the type attribute
                    (=PRIMARY/FAIL_OVER) is released to production by
                    copying the code example from there to the samples
                    directory. </para>
                <example>
                    <title>Update Node Condition Request: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-update-node-request.json" parse="text"/>
                </programlisting>
                </example>
            </section>
            <section xml:id="Remove_Nodes-d1e2675">
                <title>Remove Nodes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &DELETE;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter></td>
                            <td colspan="3">Remove a node from the load balancer.</td>
                        </tr>
                         <tr align="left">
                        <td colspan="1">&BATCH_DELETE;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes?id=<parameter>nodeId</parameter>
                            &amp;id=<parameter>nodeId</parameter></td>
                        <td colspan="3">Batch delete the nodes given specified id list.</td>
                    </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                    To batch delete nodes, provide a query parameter list of node ids. For example:
                    /nodes?id=<parameter>nodeId</parameter>&amp;id=<parameter>nodeId</parameter>
                    The current default limit is ten ids per request. Any and all configuration data is immediately purged and
                    is not recoverable. By chance one of the items in the list cannot be removed due to its current status
                    a 400:BadRequest is returned along with the ids of the ones the system identified as potential failures for
                    this request
                </para>
            </section>
        </section>
        <section xml:id="Virtual_IPs-d1e2754">
            <title>Virtual IPs</title>
            <para>
                A virtual IP (VIP) makes a load balancer accessible by clients. The load
                balancing service supports either a public VIP, routable on the public Internet, or
                a ServiceNet address, routable only within the region in which the load balancer
                resides.
            </para>
            <table rules="all">
                <caption>Virtual IP Types</caption>
                <?dbfo keep-together="always"?>
                <thead>
                    <tr align="center">
                        <td colspan="1">Name</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">
                            <code>PUBLIC</code>
                        </td>
                        <td colspan="3">An address that is routable on the public Internet.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">
                            <code>SERVICENET</code>
                        </td>
                        <td colspan="3">An address that is routable only on ServiceNet.</td>
                    </tr>
                </tbody>
            </table>
        <section xml:id="List_Virtual_IPs-d1e2809">
            <title>List Virtual IPs</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips</td>
                        <td colspan="3">List all virtual IPs associated with a load balancer.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>,
                <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>
                This request does not require a request body.
            </para>
            <example>
                <title>List Virtual IPs Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-vips-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Virtual IPs Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-vips-response.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Atom Virtual IPs Response: XML</title>
                <?dbfo keep-together="always"?>
                <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-vips.xml" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section xml:id="Add_Virtual_IP_Version_6">
            <title>Add Virtual IP Version 6</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips</td>
                        <td colspan="3">Add virtual IP version 6</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>,
                <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response code(s): loadbalancerFault (<errorcode>400</errorcode>, <errorcode>500</errorcode>),
                serviceUnavailable (<errorcode>503</errorcode>), unauthorized (<errorcode>401</errorcode>),
                badRequest (<errorcode>400</errorcode>), overLimit (<errorcode>413</errorcode>)
             </simpara>
            <example>
                <title>Add Virtual IP Version 6 Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-add-vip-v6-request.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Add Virtual IP Version 6 Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-add-vip-v6-request.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Add Virtual IP Version 6 Response: XML</title>
                <?dbfo keep-together="always"?>
                <programlisting language="xml">
<xi:include href="samples/lb-add-vip-v6-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Add Virtual IP Version 6 Response: JSON</title>
                <?dbfo keep-together="always"?>
                <programlisting language="javascript">
<xi:include href="samples/lb-add-vip-v6-response.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section  xml:id="Remove_Virtual_IP-d1e2919">
            <title>Remove Virtual IP</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&DELETE;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips/<parameter>id</parameter></td>
                        <td colspan="3">Remove a virtual IP.</td>
                    </tr>
                     <tr align="left">
                        <td colspan="1">&BATCH_DELETE;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips?id=<parameter>virtualipId</parameter>
                            &amp;id=<parameter>virtualipId</parameter></td>
                        <td colspan="3">Batch delete the virtual IPs
                                specified in the id list.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>,
                <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>
                This request does not require a request body.
            </para>
            <note>
                <para>All load balancers must have at least one
                        virtual IP associated with them at all times.
                        Attempting to delete the last virtual IP will
                        result in a <returnvalue>400
                            (badRequest)</returnvalue> fault. To batch
                        delete virtual ips, provide a query parameter
                        list of virtual ip ids. For example:
                            /virtualips?id=<parameter>virtualIpId</parameter>&amp;id=<parameter>virtualIpId</parameter>.
                        The current default limit is ten ids per
                        request. Any and all configuration data is
                        immediately purged and is not recoverable. If
                        one or more of the items in the list cannot be
                        removed due to its current status, a
                            <returnvalue>400
                            (badRequest)</returnvalue> is returned
                        along with the ids of the ones the system
                        identified as potential failures for this
                        request. </para>
            </note>
        </section>
        </section>
        <section xml:id="Usage_Reports-d1e3009">
            <title>Usage Reports</title>
        <section xml:id="List_Usage-d1e3014">
                <title>List Usage</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                        <td colspan="1">Name</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;</td>
                            <td colspan="3">/loadbalancers/usage?startTime=2010-12-15&amp;endTime=2011-5-1</td>
                            <td colspan="3">List account level usage.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&GET;</td>
                            <td colspan="3">/loadbalancers/loadBalancerId/usage?startTime=2010-12-15&amp;endTime=2011-5-1</td>
                            <td colspan="3">List historical usage.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&GET;</td>
                            <td colspan="3">/loadbalancers/loadBalancerId/usage/current</td>
                            <td colspan="3">List current usage.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <para>The load balancer usage reports provide a view of all transfer activity, average
                        number of connections, and number of virtual IPs associated with the load
                        balancing service. Current usage represents all usage recorded within the
                        preceding 24 hours. Values for both <code>incomingTransfer</code> and
                            <code>outgoingTransfer</code> are expressed in bytes transferred. The
                        optional <code>startTime</code> and <code>endTime</code> parameters can be used
                        to filter all usage. If the <code>startTime</code> parameter is supplied but the
                            <code>endTime</code> parameter is not, then all usage beginning with the
                            <code>startTime</code> will be provided. Likewise, if the
                            <code>endTime</code> parameter is supplied but the <code>startTime</code>
                        parameter is not, then all usage will be returned up to the <code>endTime</code>
                        specified. </para>
                <note>
                    <para>Historical usage data is available for up to 90 days of service
                            activity.</para>
                </note>
                <example>
                    <title>Report Load Balancer Usage Response: XML</title>
                    <programlisting language="xml">
    <xi:include href="samples/lb-report-usage-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Report Load Balancer Usage Response: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="javascript">
    <xi:include href="samples/lb-report-usage-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="Access_Lists-d1e3160">
            <title>Access Lists</title>
            <para>The access list management feature allows fine-grained network access controls to
                be applied to the load balancer's virtual IP address. A single IP address, multiple
                IP addresses, or entire network subnets can be added as a <code>networkItem</code>.
                Items that are configured with the <code>ALLOW</code> type will always take
                precedence over items with the <code>DENY</code> type. To reject traffic from all
                items except for those with the <code>ALLOW</code> type, add a
                    <code>networkItem</code> with an address of "0.0.0.0/0" and a <code>DENY</code>
                type. </para>
        <section xml:id="Manage_Access_Lists-d1e3187">
            <title>Manage Access Lists</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Name</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/accesslist</td>
                        <td colspan="3">List the access list.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/accesslist</td>
                        <td colspan="3">Create a new access list or append to an existing access list.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/accesslist/<parameter>networkItemId</parameter></td>
                        <td colspan="3">Remove a network item from the access list.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/accesslist</td>
                        <td colspan="3">Remove the entire access list.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&BATCH_DELETE;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId/</parameter>accesslist?id=<parameter>networkItemId</parameter>
                            &amp;id=<parameter>networkItemId</parameter></td>
                        <td colspan="3">Batch delete the access list network items given specified id list.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>,
                <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>This operation does not require a request body.</para>
            <para>
                When issuing a &POST; to add to an access list, one or more network items are
                    required. If a populated access list already exists for the load balancer, it
                    will be appended to with subsequent &POST; requests. One access list may include
                    up to 100 network items A single address or subnet definition is considered
                    unique and cannot be duplicated between items in an access list. There are two
                    &DELETE; operations for the access list. One allows for deletion of multiple network items
                    in an access list, or the entire accesslist, and the other for deletion of a specific
                    network item in the access list.
            </para>
            <example>
                    <?dbfo keep-together="always"?>
                <title>List Access List Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-retrieve-accesslist-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Access List Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-retrieve-accesslist-response.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Atom Access List Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-accesslist.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Access List Attributes Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-update-accesslist-request.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Access List Attributes Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-update-accesslist-request.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        </section>
        <section xml:id="Monitors-d1e3370">
            <title>Monitors</title>
            <para>The load balancing service includes a health monitoring operation which
                periodically checks your back-end nodes to ensure they are responding correctly. If
                a node is not responding, it is removed from rotation until the health monitor
                determines that the node is functional. In addition to being performed periodically,
                the health check also is performed against every node that is added to ensure that
                the node is operating properly before allowing it to service traffic. Only one
                health monitor is allowed to be enabled on a load balancer at a time.
            </para>
            <para>
                Every health monitor has a <code>type</code> attribute to signify what kind of monitor it is.
            </para>
            <table rules="all">
                <caption>Health Monitor Types</caption>
                <?dbfo keep-together="always"?>
                <thead>
                    <tr align="center">
                        <td colspan="1">Name</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">CONNECT</td>
                        <td colspan="3">Health monitor is a connect monitor.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">HTTP</td>
                        <td colspan="3">Health monitor is an HTTP monitor.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">HTTPS</td>
                        <td colspan="3">Health monitor is an HTTPS monitor.</td>
                    </tr>
                </tbody>
            </table>
        <section xml:id="Monitor_Health-d1e3434">
            <title>Monitor Health</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/healthmonitor</td>
                        <td colspan="3">Retrieve the health monitor configuration, if one exists.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/healthmonitor</td>
                        <td colspan="3">Update the settings for a health monitor.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;
                        </td>
                        <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/healthmonitor</td>
                        <td colspan="3">Remove the health monitor.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>,
                <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <section xml:id="Monitor_Connections-d1e3536">
                <title>Monitor Connections</title>
                <para>The monitor connects to each node on its defined port to ensure that the
                    service is listening properly. The connect monitor is the most basic type of
                    health check and does no post-processing or protocol specific health checks. It
                    includes several configurable properties:
                </para>
                <para>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>
                                <code>delay</code>: The minimum number of seconds to wait before executing the
                                health monitor. (Must be a number between 1 and 3600)
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>timeout</code>: Maximum number of seconds to wait for a connection to be
                                established before timing out. (Must be a number between 1 and 300)
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>attemptsBeforeDeactivation</code>: Number of permissible monitor failures
                                before removing a node from rotation. (Must be a number between 1 and 10)
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <example>
                    <title>Monitor Connections Request: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-monitor-connect-request.xml" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>Monitor Connections Request: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-monitor-connect-request.json" parse="text"/>
                </programlisting>
                </example>
            <example>
                <title>Monitor Connections Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-monitor-connect-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Monitor Connections Response: JSON</title>
                <?dbfo keep-together="always"?>
                <programlisting language="javascript">
<xi:include href="samples/lb-monitor-connect-response.json" parse="text"/>
                </programlisting>
            </example>
                <example>
                    <title>List Atom Health Monitor Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-healthmonitor.xml" parse="text"/>
                </programlisting>
                </example>
            </section>
            <section xml:id="Monitor_HTTP_and_HTTPS-d1e3635">
                <title>Monitor HTTP and HTTPS</title>
                <para> The HTTP and HTTPS monitor is more intelligent than the connect monitor. It
                        is capable of processing an HTTP or HTTPS response to determine the
                        condition of a node. It supports the same basic properties as the connect
                        monitor and includes additional attributes that are used to evaluate the
                        HTTP response. Available attributes are: </para>
                <para>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>
                                <code>delay</code>: The minimum number of seconds to wait before executing the
                                health monitor. (Must be a number between 1 and 3600)
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>timeout</code>: The maximum number of seconds to wait for a connection to be
                                established before timing out. (Must be a number between 1 and 300)
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>attemptsBeforeDeactivation</code>: The number of permissible monitor failures
                                before removing a node from rotation. (Must be a number between 1 and 10)
                            </para>
                        </listitem>
                        <listitem>
                            <para><code>path</code>: The HTTP path that will be used in the sample request
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>statusRegex</code>: A regular expression that will be used to evaluate the
                                HTTP status code returned in the response.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>bodyRegex</code>: A regular expression that will be used to evaluate the
                                contents of the body of the response.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
            <example>
                <title>Monitor HTTP Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-monitor-http-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Monitor HTTP Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-monitor-http-response.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Monitor HTTPS Response: XML</title>
                <?dbfo keep-together="always"?>
                <programlisting language="xml">
<xi:include href="samples/lb-monitor-https-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Monitor HTTPS Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-monitor-https-response.json" parse="text"/>
                </programlisting>
            </example>
            </section>
        </section>
        </section>
        <section xml:id="Sessions-d1e3728">
            <title>Sessions</title>
        <section xml:id="Manage_Session_Persistence-d1e3733">
            <title>Manage Session Persistence</title>
            <para>Session persistence is a feature of the load balancing service which
                forces multiple requests from clients to be directed to the same node. This is
                common with many web applications that do not inherently share application state
                between back-end servers.
            </para>
            <table rules="all">
                <caption>Session Persistence Modes</caption>
                <?dbfo keep-together="always"?>
                <thead>
                    <tr align="center">
                        <td colspan="1">Name</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">HTTP_COOKIE</td>
                        <td colspan="3">A session persistence mechanism that inserts an HTTP cookie and
                            is used to determine the destination back-end node. This is supported
                            for HTTP load balancing only.
                        </td>
                    </tr>
                </tbody>
            </table>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td>Verb</td>
                        <td>URI</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>&GET;
                        </td>
                        <td>/loadbalancers/loadBalancerId/sessionpersistence</td>
                        <td>List session persistence configuration.</td>
                    </tr>
                    <tr align="left">
                        <td>&PUT;
                        </td>
                        <td>/loadbalancers/loadBalancerId/sessionpersistence</td>
                        <td>Enable session persistence.</td>
                    </tr>
                    <tr align="left">
                        <td>&DELETE;
                        </td>
                        <td>/loadbalancers/loadBalancerId/sessionpersistence</td>
                        <td>Disable session persistence.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>,
                <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <example>
                <title>List Session Persistence Configuration Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-persistence-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Session Persistence Configuration Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-persistence-response.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Atom Session Persistence Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-sessionpersistence.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                    <?dbfo keep-together="always"?>
                <title>Set Session Persistence Type Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-set-persistence-request.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                    <?dbfo keep-together="always"?>
                <title>Set Session Persistence Type Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-set-persistence-request.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        </section>
        <section xml:id="Connections-d1e3919">
            <title>Connections</title>
        <section xml:id="Log_Connections-d1e3924">
            <title>Log Connections</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;
                        </td>
                        <td colspan="3">/loadbalancers/loadBalancerId/connectionlogging</td>
                        <td colspan="3">View current configuration of connection logging.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;
                        </td>
                        <td colspan="3">/loadbalancers/loadBalancerId/connectionlogging</td>
                        <td colspan="3">Enable or disable connection logging.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>,
                <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>This operation allows the user to view the current connection logging
                    configuration, enable connection logging, or disable connection logging. </para>
            <para>
                This operation does not require a request body.
            </para>
            <example>
                <title>List Connection Logging Configuration Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-logging-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Connection Logging Configuration Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-logging-response.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Enable Connection Logging Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-enable-logging-request.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Enable Connection Logging Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-enable-logging-request.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section xml:id="Throttle_Connections-d1e4057">
            <title>Throttle Connections</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td>Verb</td>
                        <td>URI</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>&GET;
                        </td>
                        <td>/loadbalancers/loadBalancerId/connectionthrottle</td>
                        <td>List connection throttling configuration.</td>
                    </tr>
                    <tr align="left">
                        <td>&PUT;
                        </td>
                        <td>/loadbalancers/loadBalancerId/connectionthrottle</td>
                        <td>Update throttling configuration.</td>
                    </tr>
                    <tr align="left">
                        <td>&DELETE;
                        </td>
                        <td>/loadbalancers/loadBalancerId/connectionthrottle</td>
                        <td>Remove connection throttling configurations.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>,
                <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>This operation does not require a request body.</para>
            <para>
                The connection throttling feature imposes limits on the number of connections per IP address to
                help mitigate malicious or abusive traffic to your applications. The following properties can be
                configured based on the traffic patterns for your sites.
            </para>
            <itemizedlist spacing="compact">
                <listitem>
                    <para>
                            <code>minConnections</code>: Allow at least this number of connections
                            per IP address before applying throttling restrictions. Setting a value
                            of 0 allows unlimited simultaneous connections; otherwise, set a value
                            between 1 and 1000. </para>
                </listitem>
                <listitem>
                    <para><code>maxConnections</code>: Maximum number of connection to allow for a single IP
                        address.  Setting a value of 0 will allow unlimited simultaneous connections, otherwise
                        set a value between 1 and 100000.
                    </para>
                </listitem>
                <listitem>
                    <para>
                            <code>maxConnectionRate</code>: Maximum number of connections allowed
                            from a single IP address in the defined <code>rateInterval</code>.
                            Setting a value of 0 allows an unlimited connection rate; otherwise, set
                            a value between 1 and 100000. </para>
                </listitem>
                <listitem>
                    <para><code>rateInterval</code>: Frequency (in seconds) at which the
                                <code>maxConnectionRate</code> is assessed. For example, a
                                <code>maxConnectionRate</code> of 30 with a
                                <code>rateInterval</code> of 60 would allow a maximum of 30
                            connections per minute for a single IP address. This value must be
                            specified between 1 and 3600. </para>
                </listitem>
            </itemizedlist>
            <example>
                <title>List Connection Throttling Configuration Response: XML</title>
                <?dbfo keep-together="always"?>
                <programlisting language="xml">
<xi:include href="samples/lb-list-throttling-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Connection Throttling Configuration Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-throttling-response.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Connection Throttling Configuration Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-update-throttling-request.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Connection Throttling Configuration Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-update-throttling-request.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Atom Connection Throttling Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-connectionthrottle.xml" parse="text"/>
                </programlisting>
            </example>
        </section>
        </section>
        <section xml:id="Protocols-d1e4264">
            <title>Protocols</title>
        <section xml:id="List_Load_Balancing_Protocols-d1e4269">
            <title>List Load Balancing Protocols</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td>Verb</td>
                        <td>URI</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>&GET;
                        </td>
                        <td>/loadbalancers/protocols</td>
                        <td>List all supported load balancing protocols.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>
                This operation does not require a request body.
            </para>
            <para>All load balancers must define the protocol of the service which is being load
                    balanced. The protocol selection should be based on the protocol of the back-end
                    nodes. When configuring a load balancer, the default port for the given protocol
                    will be selected unless otherwise specified. </para>
            <example>
                <title>List Load Balancing Protocols Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-protocols-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Load Balancing Protocols Response: JSON</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-protocols-response.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        </section>
        <section xml:id="Algorithms-d1e4367">
            <title>Algorithms</title>
            <para>All load balancers utilize an algorithm that defines how traffic should be
                directed between back-end nodes. The default algorithm for newly created load
                balancers is <code>RANDOM</code>, which can be overridden at creation time or
                changed after the load balancer has been initially provisioned. The algorithm name
                is to be constant within a major revision of the load balancing API, though new
                algorithms may be created with a unique algorithm name within a given major revision
                of the service API. </para>
            <table rules="all">
                <caption>Load Balancing Algorithms</caption>
                <thead>
                    <tr align="center">
                        <td colspan="2">Name</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="2">
                            <code>LEAST_CONNECTIONS</code>
                        </td>
                        <td colspan="3">The node with the lowest number of connections will receive
                            requests.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="2">
                            <code>RANDOM</code>
                        </td>
                        <td colspan="3">Back-end servers are selected at random.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="2">
                            <code>ROUND_ROBIN</code>
                        </td>
                        <td colspan="3">Connections are routed to each of the back-end servers in turn.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="2">
                            <code>WEIGHTED_LEAST_CONNECTIONS</code>
                        </td>
                        <td colspan="3">Each request will be assigned to a node based on the number of
                            concurrent connections to the node and its weight.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="2">
                            <code>WEIGHTED_ROUND_ROBIN</code>
                        </td>
                        <td colspan="3">A round robin algorithm, but with different proportions of traffic
                            being directed to the back-end nodes. Weights must be defined as part of
                            the load balancer's node configuration.
                        </td>
                    </tr>
                </tbody>
            </table>
        <section xml:id="List_Load_Balancing_Algorithms-d1e4459">
            <title>List Load Balancing Algorithms</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;
                        </td>
                        <td colspan="3">/loadbalancers/algorithms</td>
                        <td colspan="3">List all supported load balancing algorithms.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>
                This operation does not require a request body.
            </para>
            <example>
                <title>List Load Balancing Algorithms Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-algorithms-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Load Balancing Algorithms Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-algorithms-response.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        </section>
    </chapter>
</book>
